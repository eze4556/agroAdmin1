<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>Consultas</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <!-- Filtros -->
  <ion-grid fixed>
    <ion-row>
      <ion-col size="6">
        <div class="custom-item">
          <label for="emailFilter">Filtrar por Email</label>
          <input
            id="emailFilter"
            [(ngModel)]="filtroEmail"
            placeholder="Ingrese email"
            (input)="aplicarFiltros()"
            class="custom-input"
          />
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>

  <!-- Tabla de Consultas -->
  <ion-grid fixed>
    <ion-row>
      <ion-col size="2">DNI</ion-col>
      <ion-col size="2">Email</ion-col>
      <ion-col size="3">Fecha</ion-col>
      <ion-col size="1">Precio</ion-col>
      <ion-col size="2">Estado</ion-col>
      <ion-col size="2">Acciones</ion-col>
    </ion-row>

    <ng-container *ngFor="let consulta of consultasFiltradas">
      <ion-row>
        <ion-col size="2">{{ consulta?.dni }}</ion-col>
        <ion-col size="2">{{ consulta?.payerEmail }}</ion-col>
        <ion-col size="3">
          {{ consulta?.paymentDate | date: 'dd/MM/yyyy HH:mm' }}
        </ion-col>
        <ion-col size="1">{{ consulta?.price | currency: 'USD' }}</ion-col>
        <ion-col size="2">{{ consulta?.status }}</ion-col>
        <ion-col size="2">
          <ion-button
            color="danger"
            fill="outline"
            (click)="eliminarConsulta(consulta)"
          >
            Eliminar
          </ion-button>
        </ion-col>
      </ion-row>
    </ng-container>
  </ion-grid>
</ion-content>
